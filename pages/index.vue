<template>
  <div class="container">

    <div class="banner-container">
      <div class="header-text-container">
        <p>æ›²ç‡å¸®åŠ©ä¸­å¿ƒ</p>
      </div>
      <div class="header-text-container" style="flex-direction: column;justify-content: center">
        <h1>è¯·è¾“æ‚¨çš„é—®é¢˜ï¼ğŸ™‚</h1>
        <search-bar btn="æœç´¢" placeholder="" height="54" maxlength="32" fontSize="16px" @search=""> </search-bar>
      </div>
    </div>


    <div class="service-container">
      <div class="header-text-service">
        <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/%E6%94%B6%E8%97%8F.svg">
        <h1>ä½¿ç”¨æ•™ç¨‹</h1>
      </div>

      <div href="https://knowledge-nuxt3.oss-cn-shenzhen.aliyuncs.com/software/clash%E9%85%8D%E7%BD%AE.docx" class="UseTutorial-container">
        <div class="UseTutorial-item">
          <p>Clash for Windows ä½¿ç”¨æ•™ç¨‹</p>
          <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/%E5%8F%B3%E7%AE%AD%E5%A4%B4.svg">
        </div>
        <a href="https://knowledge-nuxt3.oss-cn-shenzhen.aliyuncs.com/software/clash%E9%85%8D%E7%BD%AE.docx" class="UseTutorial-item">
          <p>Clash for Android ä½¿ç”¨æ•™ç¨‹</p>
          <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/%E5%8F%B3%E7%AE%AD%E5%A4%B4.svg">
        </a>
        <a href="https://knowledge-nuxt3.oss-cn-shenzhen.aliyuncs.com/software/clash%E9%85%8D%E7%BD%AE.docx" class="UseTutorial-item">
          <p>IOS ä½¿ç”¨æ•™ç¨‹</p>
          <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/%E5%8F%B3%E7%AE%AD%E5%A4%B4.svg">
        </a>
      </div>
    </div>


    <div class="service-container">
      <div class="header-text-service">
        <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/%E6%94%B6%E8%97%8F.svg">
        <h1>è½¯ä»¶ä¸‹è½½</h1>
      </div>

      <div class="UseTutorial-container">
        <a href="https://knowledge-nuxt3.oss-cn-shenzhen.aliyuncs.com/software/Clash.for.Windows.Setup.0.20.30.zip" class="UseTutorial-item">
          <div class="text-icon-container">
            <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/windows.svg">
            <p>Clash for Windows</p>
          </div>
          <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/%E5%8F%B3%E7%AE%AD%E5%A4%B4.svg">
        </a>
        <a href="https://knowledge-nuxt3.oss-cn-shenzhen.aliyuncs.com/software/Clash%20for%20Android_2.5.12.premium_apkcombo.com.zip" class="UseTutorial-item">
          <div class="text-icon-container">
            <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/android.svg">
            <p>Clash for Android</p>
          </div>
          <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/%E5%8F%B3%E7%AE%AD%E5%A4%B4.svg">
        </a>
        <div class="UseTutorial-item">

          <div class="text-icon-container">
            <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/IOS.svg">
            <p>IOS ä¸‹è½½æ•™ç¨‹</p>
          </div>

          <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/%E5%8F%B3%E7%AE%AD%E5%A4%B4.svg">
        </div>
      </div>
    </div>



    <div class="service-container">
      <div class="header-text-service">
        <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/%E6%89%B9%E6%AC%A1%E8%BF%BD%E6%BA%AF%E8%AF%A6%E6%83%85.svg">
        <h1>è¾“å…¥tokenç”Ÿæˆé“¾æ¥</h1>
      </div>
      <div class="getUrlByToken-container">
        <div class="input-token">
          <input v-model="inputToken" placeholder="è¾“å…¥token" type="text" >
          <div class="getTokenButton" @click="getUrlPathByToken">
            ç”Ÿæˆ
          </div>
        </div>

        <div class="input-token">
          <input class="generateUrl" ref="generateUrlByToken" v-model="getUrlByToken" placeholder="" type="text" >
          <div class="getTokenButton" @click="copyToClipboard">
            å¤åˆ¶
          </div>
        </div>
      </div>
    </div>


    <div class="service-container">
      <div class="header-text-service">
        <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/%E6%89%B9%E6%AC%A1%E8%BF%BD%E6%BA%AF%E8%AF%A6%E6%83%85.svg">
        <h1>è¾“å…¥tokenæŸ¥è¯¢å‰©ä½™æµé‡</h1>
      </div>
      <div class="getUrlByToken-container">
        <div class="input-token query-input">
          <input style="width: 85%" v-model="inputToken" placeholder="è¾“å…¥token" type="text" >
          <div class="getTokenButton" style="width: 15%"
          @click="getByteByToken"
          >
            æŸ¥è¯¢
          </div>
        </div>

        <div class="input-token flux-input">
          <input class="generateUrl" v-model="flowByte" placeholder="" type="text" style="width: 85%">
          <div class="getTokenButton" style="width: 15%;background-color: #ffffff;border: 1px solid rgba(0,0,0,0.1);color: #000000" >
            Byte
          </div>
        </div>
      </div>
    </div>



    <div class="footer-container">

      <div class="footer-text-container">
        <div class="other-services">
          <h1>æœªæ‰¾åˆ°æ‚¨éœ€è¦çš„å†…å®¹</h1>
          <p>é€šè¿‡é‚®ä»¶è”ç³»æˆ‘ä»¬ stroxy10086@gmail.com</p>
        </div>
        <a href="mailto:stroxy10086@gmail.com" class="contactUsByEmail">
          <img src="https://stroxy.oss-cn-shenzhen.aliyuncs.com/img/iconfont-email.svg">
          <p>è”ç³»æˆ‘ä»¬</p>
        </a>
      </div>
      <div class="ipc-container">
        <p>Copyright Â© 2018-2023 Tentech ç‰ˆæƒæ‰€æœ‰ </p>
        <p>æ¹˜ICPå¤‡2023014859å·</p>
      </div>
    </div>



  </div>
</template>


<script lang="ts" setup>
import { ref, toRefs, onMounted, getCurrentInstance,onUnmounted } from "vue";
const { proxy } = getCurrentInstance();
const show = ref(true)
import { baseUrl } from '~~/config'
import request from "~/api/request";
import {getProject} from "~/api/project";
import SearchBar from "~/components/search-bar.vue";

const inputToken = ref("")

const getUrlByToken = ref("")

useHead({
  title: "æ›²ç‡åŠ é€Ÿå™¨ï¼Œä¸ºé€Ÿåº¦è€Œç”Ÿï¼Œå¯è½»æ¾æ”¯æŒ4Kæµåª’ä½“",
  meta: [
    {name: 'keywords', content: "æ›²ç‡åŠ é€Ÿå™¨,ä¸€é”®å¼€å¯å­¦æœ¯åŠ é€Ÿã€æ¸¸æˆåŠ é€Ÿï¼Œæ— é™é€Ÿæ— é™æµï¼Œè¶…å¼ºæ•°æ®åŠ å¯†æŠ€æœ¯ï¼Œä»¥ä¿æŠ¤çº¿ä¸Šéšç§å®‰å…¨ã€‚" },
    {name: 'description', content: "åšæœ€å¥½ï¼Œæœ€å®‰å…¨çš„åŠ é€Ÿå™¨ï¼Œé‡‡ç”¨æœ€å‰æ²¿çš„æ•°æ®åŠ å¯†æŠ€æœ¯ï¼Œä½¿æ‚¨å…¨é¢æŒæ§æ‚¨çš„ç½‘ç»œéšç§ä¸å®‰å…¨ã€‚" }
  ],
})


const flowByte =ref()

const showData = ref(false)
const dateTest = ref({})


async  function getUrlPathByToken(){
  let token = inputToken.value
  const resp = await useFetch(`/api/ladder/link/${token}`,{
    method:"GET",
    headers: {
      'Content-Type': 'application/json;charset=UTF-8',
    }
  }).then((res)=>{

    if (res){
      let response = res.data.value
      if (response){
        let rePath = response.data
        if (rePath !== "false"){
          getUrlByToken.value = 'http://stroxy.tentech.top/api'+rePath
        }else {
          getUrlByToken.value = 'æ‚¨è¾“å…¥çš„tokenä¸å­˜åœ¨ï¼Œè¯·é‡æ–°è¾“å…¥ï¼'
        }
      }
    }
  })
}


async function getByteByToken(){
  let token = inputToken.value
  const resp = await useFetch(`/api/ladder/traffic/count/${token}`,{
    method:"GET",
    headers: {
      'Content-Type': 'application/json;charset=UTF-8',
    }
  }).then((res)=>{
    if (res){
      let response = res.data.value
      if (response){
        let byte = response.data
        flowByte.value=byte
      }
    }
  })
}


/*async function getTestDate(){
  const resp = await useFetch('http://localhost:8000/',{
    method:"GET"
  }).then((response) => {
    console.log("baseUrl"+JSON.stringify(response.data.value))
    dateTest.value=response.data.value
    showData.value = true
  })
}
const { data: archivesList, } = await useAsyncData('archives_GetList', () => getProject())

dateTest.value = archivesList.value*/

// å¤åˆ¶åˆ°å‰ªåˆ‡æ¿çš„å‡½æ•°
const copyToClipboard = () => {
  // è·å–è¾“å…¥æ¡†çš„å€¼

  if (getUrlByToken.value){
    const inputElement = proxy.$refs.generateUrlByToken
    if (inputElement) {
      inputElement.select();
      document.execCommand('copy');
      // åœ¨å®é™…åº”ç”¨ä¸­ï¼Œæ‚¨å¯èƒ½è¿˜æƒ³æä¾›ä¸€äº›ç”¨æˆ·åé¦ˆï¼Œä¾‹å¦‚æç¤ºæ¶ˆæ¯
      alert('é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿');
    }
  }else {
    alert('é“¾æ¥ä¸ºç©ºï¼Œè¯·è¾“å…¥tokenç”Ÿæˆé“¾æ¥');
  }




};

</script>

<style lang="scss" scoped>
.container{
  width: 100vw;
  max-width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100px;
  background-color: #F3F6FB;
}



.banner-container{
  width: 100%;
  min-height: 300px;
  background-color: #186DE9;
  display: flex;
  flex-direction: column;
  align-items: center;
}
.header-text-container{
  padding-top: 24px;
  width: 100%;
  max-width: 1000px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-start;
}
.header-text-container>p{
  color: #ffffff;
  font-size: 20px;
  font-weight: 700;
}
.header-text-container>h1{
  color: #ffffff;
  font-weight: 600;
}
.service-container{
  padding: 24px 0;
  width: 100%;
  max-width: 1000px;
  display: flex;
  flex-direction: column;
}
.header-text-service{
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: flex-start;
  width: 100%;
}
.header-text-service>h1{
  font-size: 26px;
  font-weight: 700;

}
.header-text-service>img{
  width: 30px;
  margin-right: 16px;
}
.UseTutorial-container{
  width: 100%;
  display: flex;
  flex-direction: row;
  justify-content: space-between;
  flex-wrap: wrap;
}
.UseTutorial-item{
  cursor: pointer;
  width: calc(50% - 16px);
  min-height: 70px;
  border-radius: 5px;
  background-color: #ffffff;
  box-shadow: 1px 3px 3px rgba(0,0,0,0.1);
  margin-bottom: 16px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  padding: 5px 16px 5px 16px;
}
.UseTutorial-item:hover{
  box-shadow: 1px 3px 5px rgba(0,0,0,0.2);
}
.text-icon-container{
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
}
.text-icon-container>img{
  width: 16px;
  margin-right: 16px;
}
.text-icon-container>p{
  color: #000000;
  font-size: 16px;
}
.UseTutorial-item>img{
  width: 16px;
}
.UseTutorial-item>p{
  color: #000000;
  font-size: 16px;
}
.getUrlByToken-container{
  width: 100%;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
}
.input-token{
  width: 100%;
  padding: 1px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 16px;
}
.input-token>input{
  border: 1px solid rgba(0,0,0,0.1);
  outline: none;
  padding: 5px 20px;
  height: 54px;
  width: 90%;
  font-size: 18px;
  color: #333333;
}
.input-token>input:focus{
  outline: none;
}
.getTokenButton{
  min-width: 99px;
  height: 54px;
  background-color: #1769E0;
  width: 10%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: #ffffff;
  font-weight: 700;
  font-size: 16px;
}
.getTokenButton:hover{
  background-color: #448CE3;
}
.footer-container{
  padding: 24px 0;
  width: 100%;
  background-color: #ffffff;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
}
.footer-text-container{
  width: 100%;
  max-width: 1000px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
}
.other-services{
  display: flex;
  flex-direction: column;
}
.other-services>h1{
  font-size: 22px;
  font-weight: 700;
  color: #303133;
}
.other-services>p{
  font-size: 14px;
  color: #606266;
}
.contactUsByEmail{
  cursor: pointer;
  background-color: #1972F5;
  padding: 10px 16px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
  border-radius: 5px;
}
.contactUsByEmail>img{
  width: 24px;
  margin-right: 10px;
}
.contactUsByEmail>p{
  color: #ffffff;
}
.ipc-container{
  padding-top: 24px;
  width: 100%;
  max-width: 1000px;
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: space-between;
}
.ipc-container>p{
  color: #909399;
}

.query-input{
  width: calc(70% - 16px)
}
.flux-input{
  width: calc(30% - 16px)
}
@media screen and (max-width: 1032px){
  .container{
    padding: 0 16px;
  }
  .header-text-container{
    padding: 16px 16px;
  }
  .footer-text-container{
    padding: 0 16px;
  }
  .ipc-container{
    padding: 0 16px;
  }
}

@media screen and (max-width: 767px){
  .UseTutorial-item{
    width: 100%;
  }
  .query-input{
    width: 100%;
  }
  .flux-input{
    width: 100%;
  }
}
</style>
